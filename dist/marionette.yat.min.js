!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("_"),require("Marionette"),require("Backbone"),require("Backbone.Radio")):"function"==typeof define&&define.amd?define(["_","Marionette","Backbone","Backbone.Radio"],e):"object"==typeof exports?exports.marionetteYat=e(require("_"),require("Marionette"),require("Backbone"),require("Backbone.Radio")):t.marionetteYat=e(t._,t.Marionette,t.Backbone,t["Backbone.Radio"])}("undefined"!=typeof self?self:this,function(t,e,r,n){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=10)}([function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=r(0),u=(n=a,n&&n.__esModule?n:{default:n});function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){return"function"==typeof e?e(t):"object"===(void 0===e?"undefined":i(e))?function(t,e){var r=function(e){f(r,t);function r(){var t;l(this,r);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return s(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(n)))}return r}();return u.default.extend(r.prototype,e),r}(t,e):t}e.default=function(t){return function(e){f(r,t);function r(){var t;l(this,r);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return s(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(n)))}return o(r,null,[{key:"with",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=this;if(!e||!e.length)return this;for(;e.length;)n=c(n,e.shift());return delete this.with,n}.apply(this,e)}}]),r}()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=f(r(1)),i=f(r(2)),a=f(r(5)),u=f(r(6)),l=f(r(7)),s=f(r(15));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,i.default)(o.default.Application).with(a.default,u.default,s.default,l.default));function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(n)))}return n(e,[{key:"_initRegion",value:function(){if(!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{skip:!0}).skip){var t=this.getProperty("region");this.region=t,function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initRegion",this).call(this)}}},{key:"getRegion",value:function(){return this._region||this._initRegion({skip:!1}),this._region}},{key:"addPageManager",value:function(t){var e=this;this._pageManagers||(this._pageManagers=[]),this._pageManagers.push(t);var r=t.getName();r?this.listenTo(t,"all",function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var a=r+":"+t;e.triggerMethod.apply(e,[a].concat(o))}):console.warn("pageManager prefix not defined")}},{key:"initRadioOnInitialize",get:function(){return!0}}]),e}();e.default=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=r(0),i=(n=o,n&&n.__esModule?n:{default:n}),a=r(1);var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.AppRouter);function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n={},o={};return(0,i.default)(t).each(function(t,e){n[e]=e,o[e]=t.action}),r.processAppRoutes(o,n),r}return e}();e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=a(r(0)),i=a(r(12));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e,r){if(null!=t){var n,a,u=(n=e,o.default.extend({},{deep:!0,force:!0,args:[]},n)),l=(a=e,o.default.extend({},a,{deep:!1,force:!1})),s=function(t,e){var r="getOption"===t?this:"getProperty"===t&&o.default.isObject(this.options)?this.options:null;if(null!=r)return r[e]}.call(this,r,t);return void 0===s&&u.deep&&(s=this[r](t,l)),"function"!=typeof s||(0,i.default)(s)||!u.force?s:s.apply(this,u.args)}}e.default=function(t){return function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,t);function r(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(n)))}return n(r,[{key:"getProperty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{deep:!0,force:!0,args:[]};return u.call(this,t,e,"getOption")}},{key:"getOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{deep:!0,force:!0,args:[]};return u.call(this,t,e,"getProperty")}}]),r}()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.default=function(t){return function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,t);function r(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(n))),a=!(!0===i.getProperty("initRadioOnInitialize"));return i._initRadio({skip:a}),i}return n(r,[{key:"getChannel",value:function(){return this._channel||this._initRadio({skip:!1}),this._channel}},{key:"_initRadio",value:function(){if(1!=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{skip:!0}).skip){if(!this.getProperty("channelName")){var t=this.getProperty("channel");t&&(this.channelName=t.channelName)}(function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"_initRadio",this).call(this)}}},{key:"radioRequest",value:function(){var t=this.getChannel();t&&t.request.apply(t,arguments)}},{key:"radioTrigger",value:function(){var t=this.getChannel();t&&t.trigger.apply(t,arguments)}}]),r}()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=l(r(0)),i=l(r(2)),a=l(r(14)),u=l(r(8));function l(t){return t&&t.__esModule?t:{default:t}}var s="initialized",f="starting",c="running",p="stopping",h="waiting",y="destroyed";function d(t,e){var r=this,n=t[e]||[],i=[];return(0,o.default)(n).each(function(t){o.default.isFunction(t)?i.push(t.call(r)):i.push(t)}),Promise.all(i)}function g(t,e,r){t[e]||(t[e]=[]);t[e].push(r)}e.default=function(t){var e=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,(0,i.default)(t).with(a.default));function r(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(n)));return i.initializeStartable(),i}return n(r,[{key:"initializeStartable",value:function(){this.constructor.Startable&&this.constructor.Stateable&&(this._registerStartableLifecycleListeners(),this._setLifeState(s))}},{key:"start",value:function(t){var e=this,r=this._ensureStartableCanBeStarted();if(r)return this.triggerMethod("start:decline",r),Promise.reject(r);var n=this.isStartNotAllowed(t);if(n)return this.triggerMethod("start:decline",n),Promise.reject(n);var o=this._getLifeState();this._tryMergeStartOptions(t),this.triggerMethod("before:start",this,t);return this._getStartPromise().then(function(){e.triggerStart(t)},function(){e._setLifeState(o)})}},{key:"triggerStart",value:function(t){this.triggerMethod("start",t)}},{key:"stop",value:function(t){var e=this,r=this._ensureStartableCanBeStopped();if(r)return this.triggerMethod("stop:decline",r),Promise.reject(r);var n=this.isStopNotAllowed(t);if(n)return this.triggerMethod("stop:decline",n),Promise.reject(n);var o=this._getLifeState();this._tryMergeStopOptions(t),this.triggerMethod("before:stop",this,t);return this._getStopPromise().then(function(){e.triggerStop(t)},function(){e._setLifeState(o)})}},{key:"triggerStop",value:function(t){this.triggerMethod("stop",t)}},{key:"isStartNotAllowed",value:function(){}},{key:"isStopNotAllowed",value:function(){}},{key:"addStartPromise",value:function(t){g(this,"startPromises",t)}},{key:"addStopPromise",value:function(t){g(this,"stopPromises",t)}},{key:"_setLifeState",value:function(t){this.setState("life",t)}},{key:"_getLifeState",value:function(){return this.getState("life")}},{key:"_isLifeState",value:function(t){return this._getLifeState()===t}},{key:"_isLifeStateIn",value:function(){for(var t=this,e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,o.default)(r).some(function(e){return t._isLifeState(e)})}},{key:"_isInProcess",value:function(){return this._isLifeStateIn(f,p)}},{key:"_registerStartableLifecycleListeners",value:function(){var t=this;this.on("before:start",function(){return t._setLifeState(f)}),this.on("start",function(){return t._setLifeState(c)}),this.on("before:stop",function(){return t._setLifeState(p)}),this.on("stop",function(){return t._setLifeState(h)}),this.on("destroy",function(){return t._setLifeState(y)})}},{key:"_tryMergeStartOptions",value:function(t){if(this.mergeOptions){var e=this.getProperty("mergeStartOptions")||[];this.mergeOptions(t,e)}}},{key:"_tryMergeStopOptions",value:function(t){if(this.mergeOptions){var e=this.getProperty("mergeStopOptions")||[];this.mergeOptions(t,e)}}},{key:"_ensureStartableIsIntact",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{throwError:!1},e="Startable has already been destroyed and cannot be used.",r=this._isLifeState(y);if(t.throwError&&r)throw new u.default({name:"StartableLifecycleError",message:e});if(r)return e}},{key:"_ensureStartableIsIdle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{throwError:!1},e="Startable is not idle. current state: "+this._getLifeState(),r=this._ensureStartableIsIntact(t),n=this._isInProcess();if(t.throwError&&n)throw new u.default({name:"StartableLifecycleError",message:e});return r||(n?e:void 0)}},{key:"_ensureStartableCanBeStarted",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{throwError:!1},e="Startable has already been started.",r=this._ensureStartableIsIdle(t),n=!0===this.getProperty("allowStartWithoutStop");if(r||!n){var o=this._isLifeState(c);if(t.throwError&&o)throw new u.default({name:"StartableLifecycleError",message:e});return r||(o?e:void 0)}}},{key:"_ensureStartableCanBeStopped",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{throwError:!1},e="Startable should be in `running` state.",r=this._ensureStartableIsIdle(t),n=!0===this.getProperty("allowStopWithoutStart");if(r||!n){var o=this._isLifeState(c);if(t.throwError&&!o)throw new u.default({name:"StartableLifecycleError",message:e});return r||(o?void 0:e)}}},{key:"_getStartPromise",value:function(){return Promise.all(this._getStartPromises())}},{key:"_getStartPromises",value:function(){var t=[];return t.push(this._getStartUserPromise()),t.push(this._getStartParentPromise()),t}},{key:"_getStartUserPromise",value:function(){return d(this,"startPromises")}},{key:"_getStartParentPromise",value:function(){var t=o.default.result(this,"getParent");if(o.default.isObject(t)&&o.default.isFunction(t._getStartPromise))return t._getStartPromise()}},{key:"_getStopPromise",value:function(){return Promise.all(this._getStopPromises())}},{key:"_getStopPromises",value:function(){var t=[];return t.push(this._getStopUserPromise()),t}},{key:"_getStopUserPromise",value:function(){return d(this,"stopPromises")}},{key:"_getStopParentPromise",value:function(){var t=o.default.result(this,"getParent");if(o.default.isObject(t)&&o.default.isFunction(t._getStopPromise))return t._getStartPromise()}}]),r}();return e.Startable=!0,e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=r(1),i=(n=o,n&&n.__esModule?n:{default:n});var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default.Error);function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(n)))}return e}();e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.default=function(t){return function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,t);function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,[{key:"getName",value:function(){return this.getProperty("name")||this.id||this.cid}},{key:"getLabel",value:function(){return this.getProperty("label")||this.getName()}}]),r}()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(r(1)),o=f(r(11)),i=f(r(3)),a=f(r(17)),u=f(r(8)),l=f(r(4)),s=f(r(18));function f(t){return t&&t.__esModule?t:{default:t}}var c={Error:u.default,Object:a.default,App:i.default,Page:o.default,Router:l.default,PageManager:s.default};n.default.Yat=c,e.default=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=l(r(3)),i=l(r(2)),a=(l(r(7)),l(r(9))),u=l(r(4));l(r(16));function l(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,i.default)(o.default).with(a.default));function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(n)));return i.allowStopWithoutStart=!0,i.allowStartWithoutStop=!0,i.initializeYatPage(),i}return n(e,[{key:"initializeYatPage",value:function(t){this._initializeModels(t),this._initializeRoute(t),this._tryCreateRouter(),this._tryProxyToRadio()}},{key:"getLayout",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(!this._layoutView||t.rebuild||this._layoutView&&this._layoutView.isDestroyed&&this._layoutView.isDestroyed())&&this.buildLayout(),this._layoutView}},{key:"buildLayout",value:function(){var t=this.getProperty("Layout");if(null!=t){var e=_.extend({},this.getProperty("layoutOptions"));this.model&&!e.model&&_.extend(e,{model:this.model}),this.collection&&!e.collection&&_.extend(e,{collection:this.collection});var r=this.buildLayoutOptions(e);return r.page=this,this._layoutView=new t(r),this._layoutView}}},{key:"buildLayoutOptions",value:function(t){return t}},{key:"addModel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t){this.model=t;var r=e.fetch||this.getOption("fetchModelOnAdd");void 0===r&&(r=this.getProperty("fetchDataOnAdd")),!0===r&&this.addStartPromise(t.fetch(e))}}},{key:"addCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t){this.collection=t;var r=e.fetch||this.getOption("fetchCollectionOnAdd");void 0===r&&(r=this.getProperty("fetchDataOnAdd")),!0===r&&this.addStartPromise(t.fetch(e))}}},{key:"getRouteHash",value:function(){var t,e=[{},this._routeHandler].concat(this.getChildren().map(function(t){return t.getRouteHash()}));return(t=_).extend.apply(t,s(e))}},{key:"hasRouteHash",value:function(){return _.isObject(this.getRouteHash())}},{key:"_initializeModels",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.addModel(t.model,t),this.addCollection(t.collection,t)}},{key:"_initializeRoute",value:function(){var t=this,e=this.getRoute();if(null!=e){this._routeHandler=(r={},n=e,o={context:this,action:function(){return t.start.apply(t,arguments)}},n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r);var r,n,o}}},{key:"getRoute",value:function(){var t=this.getProperty("relativeRoute"),e=this.getProperty("route"),r=this.getParent();if(null!=e){if(!t||!r||!r.getRoute)return e;var n=r.getRoute();return null==n?e:n+"/"+e}}},{key:"_tryCreateRouter",value:function(){!0===this.getProperty("createRouter")&&(this.router=this._createAppRouter())}},{key:"_createAppRouter",value:function(){var t=this.getRouteHash();if(_.size(t))return new u.default(t)}},{key:"_tryProxyToRadio",value:function(){this.getChannel()&&this.on("all",this._proxyEventToRadio)}},{key:"_proxyEventToRadio",value:function(t){for(var e=this.getProperty("proxyEventsToRadio"),r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e&&e.length&&!e.indexOf(t)||this.radioTrigger.apply(this,["page:"+t].concat(s([this].concat(n))))}}]),e}();e.default=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(r(0)),o=a(r(13)),i=a(r(1));function a(t){return t&&t.__esModule?t:{default:t}}var u=[o.default.Model,o.default.Collection,o.default.View,o.default.Router,i.default.Object];e.default=function(t){return n.default.isFunction(t)&&(0,n.default)(u).some(function(e){return t===e||t.prototype instanceof e})}},function(t,e){t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(0),u=(n=a,n&&n.__esModule?n:{default:n});e.default=function(t){var e=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,t);function r(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(n)));return i.initializeStateable(),i}return i(r,[{key:"initializeStateable",value:function(){this._state={}}},{key:"getState",value:function(t){var e=this._state;return t?e[t]:e}},{key:"setState",value:function(t,e,r){if(null!=t)if("object"===(void 0===t?"undefined":o(t))){var n=this;r=e,e=t,(0,u.default)(e).each(function(t,e){return n.setState(e,t,r)}),this._triggerStateChange(e,r)}else{this.getState()[t]=e,this._triggerStateChange(t,e,r)}}},{key:"_triggerStateChange",value:function(t,e,r){u.default.isFunction(this.triggerMethod)&&("object"!==(void 0===t?"undefined":o(t))?(this.triggerMethod("state:"+t,e,r),!0!==e&&!1!==e||this.triggerMethod("state:"+t+":"+e.toString(),r)):(r=e,e=t,this.triggerMethod("state",e,r)))}}]),r}();return e.Stateable=!0,e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),a=(n=i,n&&n.__esModule?n:{default:n});var u="_children";e.default=function(t){var e=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,t);function r(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(n)));return i.initializeChildrenable.apply(i,n),i}return o(r,[{key:"initializeChildrenable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._initializeParrent(t),this._initializeChildren(t)}},{key:"hasChildren",value:function(){this.getChildren();return this[u].length>0}},{key:"getChildren",value:function(){return this[u]||[]}},{key:"hasParent",value:function(){var t=this.getParent();return a.default.isObject(t)}},{key:"getParent",value:function(){return this.getProperty("parent",{deep:!1})}},{key:"_initializeChildren",value:function(){var t=this,e=this.getProperty("children");this[u]=(0,a.default)(e).map(function(e){var r=t._normalizeChildContext(e);if(null!=r&&a.default.isFunction(r.Child)){var n=a.default.extend({},r);return!0===t.getOption("passToChildren")&&a.default.extend(n,t.options),n.parent=t,delete n.Child,new r.Child(n)}}).filter(function(t){return null!=t})}},{key:"_normalizeChildContext",value:function(t){var e=this.getChildOptions(),r={};return a.default.isFunction(t)&&t.Childrenable?a.default.extend(r,{Child:t},e):a.default.isFunction(t)?r=this._normalizeChildContext(t.call(this)):a.default.isObject(t)&&(r=t),r}},{key:"getChildOptions",value:function(){return this.getProperty("childOptions")}},{key:"_initializeParrent",value:function(t){null==this.parent&&null!=t.parent&&(this.parent=t.parent)}}]),r}();return e.Childrenable=!0,e}},function(t,e){t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(r(1)),o=u(r(2)),i=u(r(5)),a=u(r(6));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,o.default)(n.default.Object).with(i.default,a.default));function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(n)))}return e}();e.default=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},i=s(r(3)),a=s(r(9)),u=s(r(4)),l=s(r(2));function s(t){return t&&t.__esModule?t:{default:t}}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,l.default)(i.default).with(a.default));function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(n)));return i._initializeYatPageManager.apply(i,n),i}return n(e,[{key:"getChildOptions",value:function(){var t=o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getChildOptions",this).call(this)||{};return t.channel=this.getChannel(),t.passToChildren=!0,t}},{key:"createRouter",value:function(){var t=this.getChildren(),e={};_(t).each(function(t){_.isFunction(t.getRouteHash)&&_.extend(e,t.getRouteHash())}),this.setRouter(new u.default(e))}},{key:"setRouter",value:function(t){this.router=t}},{key:"getRouter",value:function(){return this.router}},{key:"_initializeYatPageManager",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.mergeOptions(t,["id","name","label"]),this._initPageManagerRadio(t),this.createRouter()}},{key:"getChannel",value:function(){return this._channel||this._initPageManagerRadio(this.options),this._channel}},{key:"_initPageManagerRadio",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._radioInitialized){this.mergeOptions(t,["channel","channelName"]);var r=this.getName();!this._channel&&r&&(this.channelName="pagemanager:"+r,o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initRadio",this).call(this,{skip:!1})),this._registerRadioHandlers(),this._proxyRadioEvents(),this._radioInitialized=!0}}},{key:"_registerRadioHandlers",value:function(){var t=this.getChannel();!this._radioHandlersRegistered&&t&&(this.listenTo(t,"page:before:start",this._pageBeforeStart),this.listenTo(t,"page:start",this._pageStart),this._radioHandlersRegistered=!0)}},{key:"_proxyRadioEvents",value:function(){var t=this,e=this.getChannel();if(!this._radioEventsProxied&&e){var r=this.getProperty("proxyRadioEvents")||[];_(["page:before:start","page:start"].concat(r)).each(function(r){t.listenTo(e,r,function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return t.triggerMethod.apply(t,[r].concat(n))})}),this._radioEventsProxied=!0}}},{key:"_pageBeforeStart",value:function(t){var e=this.getState("currentPage");e&&e!=t&&e.stop()}},{key:"_pageStart",value:function(t){this.setState("currentPage",t)}},{key:"initRadioOnInitialize",get:function(){return!1}}]),e}();e.default=f}])});
//# sourceMappingURL=marionette.yat.min.js.map
