!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("_"),require("Marionette"),require("Backbone"),require("Backbone.Radio")):"function"==typeof define&&define.amd?define(["_","Marionette","Backbone","Backbone.Radio"],t):"object"==typeof exports?exports.marionetteYat=t(require("_"),require("Marionette"),require("Backbone"),require("Backbone.Radio")):e.marionetteYat=t(e._,e.Marionette,e.Backbone,e["Backbone.Radio"])}("undefined"!=typeof self?self:this,function(e,t,r,n){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=14)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=r(0),u=(n=a,n&&n.__esModule?n:{default:n});function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){return"function"==typeof t?t(e):"object"===(void 0===t?"undefined":i(t))?function(e,t){var r=function(t){f(r,e);function r(){var e;l(this,r);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return s(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(n)))}return r}();return u.default.extend(r.prototype,t),r}(e,t):e}t.default=function(e){return function(t){f(r,e);function r(){var e;l(this,r);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return s(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(n)))}return o(r,null,[{key:"with",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=this;if(!t||!t.length)return this;for(;t.length;)n=c(n,t.shift());return delete this.with,n}.apply(this,t)}}]),r}()}},function(e,t){e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=c(r(1)),i=c(r(2)),a=c(r(5)),u=c(r(6)),l=c(r(7)),s=c(r(13)),f=r(3);function c(e){return e&&e.__esModule?e:{default:e}}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,i.default)(o.default.Application).with(a.default,u.default,s.default,l.default));function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)))}return n(t,[{key:"_initRegion",value:function(){if(!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{skip:!0}).skip){var e=this.getProperty("region");this.region=e,function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initRegion",this).call(this)}}},{key:"getRegion",value:function(){return this._region||this._initRegion({skip:!1}),this._region}},{key:"addPageManager",value:function(e){var t=this;this._pageManagers||(this._pageManagers=[]),this._pageManagers.push(e);var r=e.getName();r?this.listenTo(e,"all",function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var a=r+":"+e;t.triggerMethod.apply(t,[a].concat(o))}):console.warn("pageManager prefix not defined")}},{key:"hasPageManagers",value:function(){return this._pageManagers&&this._pageManagers.length>0}},{key:"getMenuTree",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rebuild:!1};if(this._menuTree&&!e.rebuild)return this._menuTree;var t=this._pageManagers||[],r=_(t).chain().map(function(e){return e.getLinks()}).flatten().value();return this._menuTree=new f.Collection(r),this._menuTree}},{key:"initRadioOnInitialize",get:function(){return!0}}]),t}();t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=a(r(0)),i=a(r(10));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r){if(null!=e){var n,a,u=(n=t,o.default.extend({},{deep:!0,force:!0,args:[]},n)),l=(a=t,o.default.extend({},a,{deep:!1,force:!1})),s=function(e,t){var r="getOption"===e?this:"getProperty"===e&&o.default.isObject(this.options)?this.options:null;if(null!=r)return r[t]}.call(this,r,e);return void 0===s&&u.deep&&(s=this[r](e,l)),"function"!=typeof s||(0,i.default)(s)||!u.force?s:s.apply(this,u.args)}}t.default=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e);function r(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(n)))}return n(r,[{key:"getProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{deep:!0,force:!0,args:[]};return u.call(this,e,t,"getOption")}},{key:"getOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{deep:!0,force:!0,args:[]};return u.call(this,e,t,"getProperty")}}]),r}()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.default=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e);function r(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(n))),a=!(!0===i.getProperty("initRadioOnInitialize"));return i._initRadio({skip:a}),i}return n(r,[{key:"getChannel",value:function(){return this._channel||this._initRadio({skip:!1}),this._channel}},{key:"_initRadio",value:function(){if(1!=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{skip:!0}).skip){if(!this.getProperty("channelName")){var e=this.getProperty("channel");e&&(this.channelName=e.channelName)}(function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"_initRadio",this).call(this)}}},{key:"radioRequest",value:function(){var e=this.getChannel();e&&e.request.apply(e,arguments)}},{key:"radioTrigger",value:function(){var e=this.getChannel();e&&e.trigger.apply(e,arguments)}}]),r}()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=l(r(0)),i=l(r(2)),a=l(r(11)),u=l(r(12));function l(e){return e&&e.__esModule?e:{default:e}}var s="initialized",f="starting",c="running",p="stopping",h="waiting",d="destroyed";function y(e,t){var r=this,n=e[t]||[],i=[];return(0,o.default)(n).each(function(e){o.default.isFunction(e)?i.push(e.call(r)):i.push(e)}),Promise.all(i)}function g(e,t,r){e[t]||(e[t]=[]);e[t].push(r)}t.default=function(e){var t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,(0,i.default)(e).with(a.default));function r(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(n)));return i.initializeStartable(),i}return n(r,[{key:"initializeStartable",value:function(){this.constructor.Startable&&this.constructor.Stateable&&(this._registerStartableLifecycleListeners(),this._setLifeState(s))}},{key:"start",value:function(e){var t=this,r=this._ensureStartableCanBeStarted();if(r)return this.triggerMethod("start:decline",r),Promise.reject(r);var n=this.isStartNotAllowed(e);if(n)return this.triggerMethod("start:decline",n),Promise.reject(n);var o=this._getLifeState();this._tryMergeStartOptions(e),this.triggerMethod("before:start",this,e);return this._getStartPromise().then(function(){t.triggerStart(e)},function(){t._setLifeState(o)})}},{key:"triggerStart",value:function(e){this.triggerMethod("start",e)}},{key:"stop",value:function(e){var t=this,r=this._ensureStartableCanBeStopped();if(r)return this.triggerMethod("stop:decline",r),Promise.reject(r);var n=this.isStopNotAllowed(e);if(n)return this.triggerMethod("stop:decline",n),Promise.reject(n);var o=this._getLifeState();this._tryMergeStopOptions(e),this.triggerMethod("before:stop",this,e);return this._getStopPromise().then(function(){t.triggerStop(e)},function(){t._setLifeState(o)})}},{key:"triggerStop",value:function(e){this.triggerMethod("stop",e)}},{key:"isStartNotAllowed",value:function(){}},{key:"isStopNotAllowed",value:function(){}},{key:"addStartPromise",value:function(e){g(this,"startPromises",e)}},{key:"addStopPromise",value:function(e){g(this,"stopPromises",e)}},{key:"_setLifeState",value:function(e){this.setState("life",e)}},{key:"_getLifeState",value:function(){return this.getState("life")}},{key:"_isLifeState",value:function(e){return this._getLifeState()===e}},{key:"_isLifeStateIn",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,o.default)(r).some(function(t){return e._isLifeState(t)})}},{key:"_isInProcess",value:function(){return this._isLifeStateIn(f,p)}},{key:"_registerStartableLifecycleListeners",value:function(){var e=this;this.on("before:start",function(){return e._setLifeState(f)}),this.on("start",function(){return e._setLifeState(c)}),this.on("before:stop",function(){return e._setLifeState(p)}),this.on("stop",function(){return e._setLifeState(h)}),this.on("destroy",function(){return e._setLifeState(d)})}},{key:"_tryMergeStartOptions",value:function(e){if(this.mergeOptions){var t=this.getProperty("mergeStartOptions")||[];this.mergeOptions(e,t)}}},{key:"_tryMergeStopOptions",value:function(e){if(this.mergeOptions){var t=this.getProperty("mergeStopOptions")||[];this.mergeOptions(e,t)}}},{key:"_ensureStartableIsIntact",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{throwError:!1},t="Startable has already been destroyed and cannot be used.",r=this._isLifeState(d);if(e.throwError&&r)throw new u.default({name:"StartableLifecycleError",message:t});if(r)return t}},{key:"_ensureStartableIsIdle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{throwError:!1},t="Startable is not idle. current state: "+this._getLifeState(),r=this._ensureStartableIsIntact(e),n=this._isInProcess();if(e.throwError&&n)throw new u.default({name:"StartableLifecycleError",message:t});return r||(n?t:void 0)}},{key:"_ensureStartableCanBeStarted",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{throwError:!1},t="Startable has already been started.",r=this._ensureStartableIsIdle(e),n=!0===this.getProperty("allowStartWithoutStop");if(r||!n){var o=this._isLifeState(c);if(e.throwError&&o)throw new u.default({name:"StartableLifecycleError",message:t});return r||(o?t:void 0)}}},{key:"_ensureStartableCanBeStopped",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{throwError:!1},t="Startable should be in `running` state.",r=this._ensureStartableIsIdle(e),n=!0===this.getProperty("allowStopWithoutStart");if(r||!n){var o=this._isLifeState(c);if(e.throwError&&!o)throw new u.default({name:"StartableLifecycleError",message:t});return r||(o?void 0:t)}}},{key:"_getStartPromise",value:function(){return Promise.all(this._getStartPromises())}},{key:"_getStartPromises",value:function(){var e=[];return e.push(this._getStartUserPromise()),e.push(this._getStartParentPromise()),e}},{key:"_getStartUserPromise",value:function(){return y(this,"startPromises")}},{key:"_getStartParentPromise",value:function(){var e=o.default.result(this,"getParent");if(o.default.isObject(e)&&o.default.isFunction(e._getStartPromise))return e._getStartPromise()}},{key:"_getStopPromise",value:function(){return Promise.all(this._getStopPromises())}},{key:"_getStopPromises",value:function(){var e=[];return e.push(this._getStopUserPromise()),e}},{key:"_getStopUserPromise",value:function(){return y(this,"stopPromises")}},{key:"_getStopParentPromise",value:function(){var e=o.default.result(this,"getParent");if(o.default.isObject(e)&&o.default.isFunction(e._getStopPromise))return e._getStartPromise()}}]),r}();return t.Startable=!0,t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.default=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,[{key:"getName",value:function(){return this.getProperty("name")||this.id||this.cid}},{key:"getLabel",value:function(){return this.getProperty("label")||this.getName()}}]),r}()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(0),i=(n=o,n&&n.__esModule?n:{default:n}),a=r(1);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.AppRouter);function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n={},o={};return(0,i.default)(e).each(function(e,t){n[t]=t,o[t]=e.action}),r.processAppRoutes(o,n),r}return t}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(0)),o=a(r(3)),i=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}var u=[o.default.Model,o.default.Collection,o.default.View,o.default.Router,i.default.Object];t.default=function(e){return n.default.isFunction(e)&&(0,n.default)(u).some(function(t){return e===t||e.prototype instanceof t})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),u=(n=a,n&&n.__esModule?n:{default:n});t.default=function(e){var t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e);function r(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(n)));return i.initializeStateable(),i}return i(r,[{key:"initializeStateable",value:function(){this._state={}}},{key:"getState",value:function(e){var t=this._state;return e?t[e]:t}},{key:"setState",value:function(e,t,r){if(null!=e)if("object"===(void 0===e?"undefined":o(e))){var n=this;r=t,t=e,(0,u.default)(t).each(function(e,t){return n.setState(t,e,r)}),this._triggerStateChange(t,r)}else{this.getState()[e]=t,this._triggerStateChange(e,t,r)}}},{key:"_triggerStateChange",value:function(e,t,r){u.default.isFunction(this.triggerMethod)&&("object"!==(void 0===e?"undefined":o(e))?(this.triggerMethod("state:"+e,t,r),!0!==t&&!1!==t||this.triggerMethod("state:"+e+":"+t.toString(),r)):(r=t,t=e,this.triggerMethod("state",t,r)))}}]),r}();return t.Stateable=!0,t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(1),i=(n=o,n&&n.__esModule?n:{default:n});var a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Error);function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)))}return t}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),a=(n=i,n&&n.__esModule?n:{default:n});var u="_children";t.default=function(e){var t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e);function r(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(n)));return i.initializeChildrenable.apply(i,n),i}return o(r,[{key:"initializeChildrenable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._initializeParrent(e),this._initializeChildren(e)}},{key:"hasChildren",value:function(){this.getChildren();return this[u].length>0}},{key:"getChildren",value:function(){return this[u]||[]}},{key:"hasParent",value:function(){var e=this.getParent();return a.default.isObject(e)}},{key:"getParent",value:function(){return this.getProperty("parent",{deep:!1})}},{key:"_initializeChildren",value:function(){var e=this,t=this.getProperty("children");this[u]=(0,a.default)(t).map(function(t){var r=e._normalizeChildContext(t);if(null!=r&&a.default.isFunction(r.Child)){var n=a.default.extend({},r);return!0===e.getOption("passToChildren")&&a.default.extend(n,e.options),n.parent=e,delete n.Child,new r.Child(n)}}).filter(function(e){return null!=e})}},{key:"_normalizeChildContext",value:function(e){var t=this.getChildOptions(),r={};return a.default.isFunction(e)&&e.Childrenable?a.default.extend(r,{Child:e},t):a.default.isFunction(e)?r=this._normalizeChildContext(e.call(this)):a.default.isObject(e)&&(r=e),r}},{key:"getChildOptions",value:function(){return this.getProperty("childOptions")}},{key:"_initializeParrent",value:function(e){null==this.parent&&null!=e.parent&&(this.parent=e.parent)}}]),r}();return t.Childrenable=!0,t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(1)),o=c(r(15)),i=c(r(4)),a=c(r(19)),u=c(r(12)),l=c(r(9)),s=c(r(20)),f=c(r(21));function c(e){return e&&e.__esModule?e:{default:e}}var p={Helpers:c(r(22)).default,Mixins:f.default,Error:u.default,Object:a.default,App:i.default,Page:o.default,Router:l.default,PageManager:s.default};n.default.Yat=p,t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=f(r(4)),i=f(r(2)),a=(f(r(7)),f(r(8))),u=f(r(9)),l=(f(r(16)),f(r(17))),s=r(3);function f(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,i.default)(o.default).with(a.default));function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return i.allowStopWithoutStart=!0,i.allowStartWithoutStop=!0,i.initializeYatPage(),i}return n(t,[{key:"initializeYatPage",value:function(e){this._initializeModels(e),this._initializeRoute(e),this._tryCreateRouter(),this._tryProxyToRadio()}},{key:"getLayout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(!this._layoutView||e.rebuild||this._layoutView&&this._layoutView.isDestroyed&&this._layoutView.isDestroyed())&&this.buildLayout(),this._layoutView}},{key:"buildLayout",value:function(){var e=this.getProperty("Layout");if(null!=e){var t=_.extend({},this.getProperty("layoutOptions"));this.model&&!t.model&&_.extend(t,{model:this.model}),this.collection&&!t.collection&&_.extend(t,{collection:this.collection});var r=this.buildLayoutOptions(t);return r.page=this,this._layoutView=new e(r),this._layoutView}}},{key:"buildLayoutOptions",value:function(e){return e}},{key:"addModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){this.model=e;var r=t.fetch||this.getOption("fetchModelOnAdd");void 0===r&&(r=this.getProperty("fetchDataOnAdd")),!0===r&&this.addStartPromise(e.fetch(t))}}},{key:"addCollection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){this.collection=e;var r=t.fetch||this.getOption("fetchCollectionOnAdd");void 0===r&&(r=this.getProperty("fetchDataOnAdd")),!0===r&&this.addStartPromise(e.fetch(t))}}},{key:"getRouteHash",value:function(){var e,t=[{},this._routeHandler].concat(this.getChildren().map(function(e){return e.getRouteHash()}));return(e=_).extend.apply(e,c(t))}},{key:"hasRouteHash",value:function(){return _.isObject(this.getRouteHash())}},{key:"getLinkModel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._linkModel)return this._linkModel;var t=this.getRoute(),r=this.getLabel(),n=this._getSublinks(e);return this._linkModel=new l.default({url:t,label:r,level:e,children:n}),this._linkModel}},{key:"getParentLinkModel",value:function(){var e=this.getParent();if(e&&e.getLinkModel){return e.getLinkModel()}}},{key:"getNeighbourLinks",value:function(){var e=this.getLinkModel();if(e.collection)return e.collection}},{key:"_getSublinks",value:function(e){var t=this.getChildren();if(t&&t.length){var r=_(t).map(function(t){return t.getLinkModel(e+1)});if(r.length){return new s.Collection(r)}}}},{key:"_initializeModels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.addModel(e.model,e),this.addCollection(e.collection,e)}},{key:"_initializeRoute",value:function(){var e=this,t=this.getRoute();if(null!=t){this._routeHandler=(r={},n=t,o={context:this,action:function(){return e.start.apply(e,arguments)}},n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r);var r,n,o}}},{key:"getRoute",value:function(){var e=this.getProperty("relativeRoute"),t=this.getProperty("route"),r=this.getParent();if(null!=t){if(!e||!r||!r.getRoute)return t;var n=r.getRoute();if(null==n)return t;var o=n+"/"+t;return o.startsWith("/")&&(o=o.substring(1)),o}}},{key:"_tryCreateRouter",value:function(){!0===this.getProperty("createRouter")&&(this.router=this._createAppRouter())}},{key:"_createAppRouter",value:function(){var e=this.getRouteHash();if(_.size(e))return new u.default(e)}},{key:"_tryProxyToRadio",value:function(){this.getChannel()&&this.on("all",this._proxyEventToRadio)}},{key:"_proxyEventToRadio",value:function(e){for(var t=this.getProperty("proxyEventsToRadio"),r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];t&&t.length&&!t.indexOf(e)||this.radioTrigger.apply(this,["page:"+e].concat(c([this].concat(n))))}}]),t}();t.default=p},function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(18),i=(n=o,n&&n.__esModule?n:{default:n});t.default=i.default.extend({defaults:{url:void 0,label:void 0,target:"_self",level:0}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);var o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.Model);function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)))}return t}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(1)),o=u(r(2)),i=u(r(5)),a=u(r(6));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,o.default)(n.default.Object).with(i.default,a.default));function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)))}return t}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},i=f(r(0)),a=f(r(4)),u=f(r(8)),l=f(r(9)),s=f(r(2));function f(e){return e&&e.__esModule?e:{default:e}}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,s.default)(a.default).with(u.default));function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return i._initializeYatPageManager.apply(i,n),i}return n(t,[{key:"getChildOptions",value:function(){var e=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getChildOptions",this).call(this)||{};return e.channel=this.getChannel(),e.passToChildren=!0,e}},{key:"createRouter",value:function(){var e=this.getChildren(),t={};(0,i.default)(e).each(function(e){i.default.isFunction(e.getRouteHash)&&i.default.extend(t,e.getRouteHash())}),this.setRouter(new l.default(t))}},{key:"setRouter",value:function(e){this.router=e}},{key:"getRouter",value:function(){return this.router}},{key:"getLinks",value:function(){var e=this.getChildren();if(e)return(0,i.default)(e).map(function(e){return e.getLinkModel()})}},{key:"_initializeYatPageManager",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.mergeOptions(e,["id","name","label"]),this._initPageManagerRadio(e),this.createRouter()}},{key:"getChannel",value:function(){return this._channel||this._initPageManagerRadio(this.options),this._channel}},{key:"_initPageManagerRadio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._radioInitialized){this.mergeOptions(e,["channel","channelName"]);var r=this.getName();!this._channel&&r&&(this.channelName="pagemanager:"+r,o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initRadio",this).call(this,{skip:!1})),this._registerRadioHandlers(),this._proxyRadioEvents(),this._radioInitialized=!0}}},{key:"_registerRadioHandlers",value:function(){var e=this.getChannel();!this._radioHandlersRegistered&&e&&(this.listenTo(e,"page:before:start",this._pageBeforeStart),this.listenTo(e,"page:start",this._pageStart),this._radioHandlersRegistered=!0)}},{key:"_proxyRadioEvents",value:function(){var e=this,t=this.getChannel();if(!this._radioEventsProxied&&t){var r=this.getProperty("proxyRadioEvents")||[];(0,i.default)(["page:before:start","page:start"].concat(r)).each(function(r){e.listenTo(t,r,function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.triggerMethod.apply(e,[r].concat(n))})}),this._radioEventsProxied=!0}}},{key:"_pageBeforeStart",value:function(e){var t=this.getState("currentPage");t&&t!=e&&t.stop()}},{key:"_pageStart",value:function(e){this.setState("currentPage",e)}},{key:"initRadioOnInitialize",get:function(){return!1}}]),t}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(8)),o=s(r(5)),i=s(r(6)),a=s(r(7)),u=s(r(11)),l=s(r(13));function s(e){return e&&e.__esModule?e:{default:e}}t.default={GetNameLabel:n.default,GetOptionProperty:o.default,Radioable:i.default,Stateable:u.default,Startable:a.default,Childrenable:l.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(10)),o=i(r(2));function i(e){return e&&e.__esModule?e:{default:e}}t.default={isKnownCtor:n.default,mixin:o.default}}])});
//# sourceMappingURL=marionette.yat.min.js.map
